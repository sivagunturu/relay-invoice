{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/lib/actions/auth.ts"],"sourcesContent":["'use server';\n\nimport { createClient } from '@/lib/supabase/server';\nimport { redirect } from 'next/navigation';\nimport { signUpSchema, loginSchema } from '../validations/schemas';\n\nexport async function signUp(formData: FormData) {\n  const supabase = await createClient();\n\n  const data = signUpSchema.parse({\n    email: formData.get('email'),\n    password: formData.get('password'),\n    companyName: formData.get('companyName'),\n  });\n\n  const { data: authData, error } = await supabase.auth.signUp({\n    email: data.email,\n    password: data.password,\n  });\n\n  if (error) {\n    return { error: error.message };\n  }\n\n  if (authData.user) {\n    // Create organization\n    const { data: org, error: orgError } = await supabase\n      .from('organizations')\n      .insert({ name: data.companyName })\n      .select()\n      .single();\n\n    if (orgError || !org) {\n      return { error: 'Failed to create organization' };\n    }\n\n    // Add user as owner\n    await supabase.from('org_members').insert({\n      org_id: org.id,\n      user_id: authData.user.id,\n      role: 'owner',\n      status: 'active',\n    });\n\n    // Create org settings\n    await supabase.from('org_settings').insert({\n      org_id: org.id,\n      company_name: data.companyName,\n      default_terms: 'Net 60',\n      default_currency: 'USD',\n      invoice_prefix: 'INV',\n      invoice_counter: 0,\n    });\n  }\n\n  redirect('/dashboard');\n}\n\nexport async function login(formData: FormData) {\n  const supabase = await createClient();\n\n  const data = loginSchema.parse({\n    email: formData.get('email'),\n    password: formData.get('password'),\n  });\n\n  const { error } = await supabase.auth.signInWithPassword(data);\n\n  if (error) {\n    return { error: error.message };\n  }\n\n  redirect('/dashboard');\n}\n\nexport async function logout() {\n  const supabase = await createClient();\n  await supabase.auth.signOut();\n  redirect('/login');\n}\n\nexport async function getUser() {\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n  return user;\n}\n"],"names":[],"mappings":";;;;;;;MA2EsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,0CAAA"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/layout/sidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { logout } from '@/lib/actions/auth';\n\nconst navigation = [\n  { name: 'Dashboard', href: '/dashboard' },\n  { name: 'Clients', href: '/clients' },\n  { name: 'Consultants', href: '/consultants' },\n  { name: 'Templates', href: '/templates' },\n  { name: 'Invoices', href: '/invoices' },\n  { name: 'Settings', href: '/settings' },\n];\n\nexport function Sidebar() {\n  const pathname = usePathname();\n\n  return (\n    <div className=\"w-64 bg-gray-900 text-white min-h-screen p-4\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold\">RelayInvoice</h1>\n      </div>\n      <nav className=\"space-y-2\">\n        {navigation.map((item) => {\n          const isActive = pathname.startsWith(item.href);\n          return (\n            <Link\n              key={item.name}\n              href={item.href}\n              className={`block px-4 py-2 rounded-md transition-colors ${\n                isActive\n                  ? 'bg-blue-600 text-white'\n                  : 'text-gray-300 hover:bg-gray-800'\n              }`}\n            >\n              {item.name}\n            </Link>\n          );\n        })}\n      </nav>\n      <div className=\"mt-8\">\n        <form action={logout}>\n          <button\n            type=\"submit\"\n            className=\"w-full px-4 py-2 text-left text-gray-300 hover:bg-gray-800 rounded-md\"\n          >\n            Logout\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,aAAa;IACjB;QAAE,MAAM;QAAa,MAAM;IAAa;IACxC;QAAE,MAAM;QAAW,MAAM;IAAW;IACpC;QAAE,MAAM;QAAe,MAAM;IAAe;IAC5C;QAAE,MAAM;QAAa,MAAM;IAAa;IACxC;QAAE,MAAM;QAAY,MAAM;IAAY;IACtC;QAAE,MAAM;QAAY,MAAM;IAAY;CACvC;AAEM,SAAS;IACd,MAAM,WAAW,IAAA,iJAAW;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAqB;;;;;;;;;;;0BAErC,8OAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC;oBACf,MAAM,WAAW,SAAS,UAAU,CAAC,KAAK,IAAI;oBAC9C,qBACE,8OAAC,uKAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC,6CAA6C,EACvD,WACI,2BACA,mCACJ;kCAED,KAAK,IAAI;uBARL,KAAK,IAAI;;;;;gBAWpB;;;;;;0BAEF,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,QAAQ,uKAAM;8BAClB,cAAA,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX"}}]
}