{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/lib/actions/organizations.ts"],"sourcesContent":["'use server';\n\nimport { createClient as createSupabaseClient } from '@/lib/supabase/server';\nimport { getUser } from './auth';\n\nexport async function getUserOrganization() {\n  const supabase = await createSupabaseClient();\n  const user = await getUser();\n\n  if (!user) {\n    console.log('No user found');\n    return null;\n  }\n\n  console.log('Fetching org for user:', user.id);\n\n  // Step 1: Get the org_member record\n  const { data: membership, error: memberError } = await supabase\n    .from('org_members')\n    .select('id, role, status, org_id')\n    .eq('user_id', user.id)\n    .eq('status', 'active')\n    .single();\n\n  if (memberError || !membership) {\n    console.error('Error fetching membership:', memberError);\n    return null;\n  }\n\n  console.log('Found membership:', membership);\n\n  // Step 2: Get the organization\n  const { data: org, error: orgError } = await supabase\n    .from('organizations')\n    .select('id, name, created_at')\n    .eq('id', membership.org_id)\n    .single();\n\n  if (orgError || !org) {\n    console.error('Error fetching organization:', orgError);\n    return null;\n  }\n\n  console.log('Found organization:', org);\n\n  return {\n    id: org.id,\n    name: org.name,\n    role: membership.role,\n  };\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,gJAAoB;IAC3C,MAAM,OAAO,MAAM,IAAA,wIAAO;IAE1B,IAAI,CAAC,MAAM;QACT,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC,0BAA0B,KAAK,EAAE;IAE7C,oCAAoC;IACpC,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,eACL,MAAM,CAAC,4BACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,UAAU,UACb,MAAM;IAET,IAAI,eAAe,CAAC,YAAY;QAC9B,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC,qBAAqB;IAEjC,+BAA+B;IAC/B,MAAM,EAAE,MAAM,GAAG,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SAC1C,IAAI,CAAC,iBACL,MAAM,CAAC,wBACP,EAAE,CAAC,MAAM,WAAW,MAAM,EAC1B,MAAM;IAET,IAAI,YAAY,CAAC,KAAK;QACpB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC,uBAAuB;IAEnC,OAAO;QACL,IAAI,IAAI,EAAE;QACV,MAAM,IAAI,IAAI;QACd,MAAM,WAAW,IAAI;IACvB;AACF;;;IA7CsB;;AAAA,+OAAA"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/lib/actions/consultants.ts"],"sourcesContent":["'use server';\n\nimport { createClient as createSupabaseClient } from '@/lib/supabase/server';\nimport { getUserOrganization } from './organizations';\nimport { consultantSchema } from '../validations/schemas';\nimport { revalidatePath } from 'next/cache';\nimport { redirect } from 'next/navigation';\n\nexport async function getConsultants() {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const { data, error } = await supabase\n    .from('consultants')\n    .select('*')\n    .eq('org_id', org.id)\n    .order('name');\n\n  if (error) throw new Error(error.message);\n  return data;\n}\n\nexport async function getConsultant(id: string) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const { data, error } = await supabase\n    .from('consultants')\n    .select('*')\n    .eq('id', id)\n    .eq('org_id', org.id)\n    .single();\n\n  if (error) throw new Error(error.message);\n  return data;\n}\n\nexport async function createConsultant(formData: FormData) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const data = consultantSchema.parse({\n    name: formData.get('name'),\n    defaultRate: formData.get('defaultRate'),\n    unitType: formData.get('unitType') || 'hour',\n    defaultDescription: formData.get('defaultDescription'),\n  });\n\n  const { error } = await supabase.from('consultants').insert({\n    ...data,\n    org_id: org.id,\n    default_rate: data.defaultRate.toString(),\n  });\n\n  if (error) throw new Error(error.message);\n\n  revalidatePath('/consultants');\n  redirect('/consultants');\n}\n\nexport async function updateConsultant(id: string, formData: FormData) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const data = consultantSchema.parse({\n    name: formData.get('name'),\n    defaultRate: formData.get('defaultRate'),\n    unitType: formData.get('unitType') || 'hour',\n    defaultDescription: formData.get('defaultDescription'),\n  });\n\n  const { error } = await supabase\n    .from('consultants')\n    .update({\n      ...data,\n      default_rate: data.defaultRate.toString(),\n    })\n    .eq('id', id)\n    .eq('org_id', org.id);\n\n  if (error) throw new Error(error.message);\n\n  revalidatePath('/consultants');\n  redirect('/consultants');\n}\n\nexport async function deleteConsultant(id: string) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const { error } = await supabase\n    .from('consultants')\n    .delete()\n    .eq('id', id)\n    .eq('org_id', org.id);\n\n  if (error) throw new Error(error.message);\n\n  revalidatePath('/consultants');\n  return { success: true };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/ui/card.tsx"],"sourcesContent":["import { ReactNode } from 'react';\n\nexport function Card({ children, className = '' }: { children: ReactNode; className?: string }) {\n  return (\n    <div className={`bg-white rounded-lg shadow p-6 ${className}`}>\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAEO,SAAS,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,EAA+C;IAC5F,qBACE,8OAAC;QAAI,WAAW,CAAC,+BAA+B,EAAE,WAAW;kBAC1D;;;;;;AAGP"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/ui/input.tsx"],"sourcesContent":["import { InputHTMLAttributes } from 'react';\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n}\n\nexport function Input({ label, className = '', ...props }: InputProps) {\n  return (\n    <div className=\"mb-4\">\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n          {label}\n        </label>\n      )}\n      <input\n        className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${className}`}\n        {...props}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,GAAG,OAAmB;IACnE,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;0BAGL,8OAAC;gBACC,WAAW,CAAC,uGAAuG,EAAE,WAAW;gBAC/H,GAAG,KAAK;;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/ui/button.tsx"],"sourcesContent":["import { ButtonHTMLAttributes } from 'react';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger';\n}\n\nexport function Button({ variant = 'primary', className = '', ...props }: ButtonProps) {\n  const baseStyles = 'px-4 py-2 rounded-md font-medium transition-colors';\n  const variants = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700',\n    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300',\n    danger: 'bg-red-600 text-white hover:bg-red-700',\n  };\n\n  return (\n    <button\n      className={`${baseStyles} ${variants[variant]} ${className}`}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,OAAO,EAAE,UAAU,SAAS,EAAE,YAAY,EAAE,EAAE,GAAG,OAAoB;IACnF,MAAM,aAAa;IACnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,QAAQ;IACV;IAEA,qBACE,8OAAC;QACC,WAAW,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW;QAC3D,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/app/%28dashboard%29/consultants/%5Bid%5D/edit/page.tsx"],"sourcesContent":["import { getConsultant, updateConsultant, deleteConsultant } from '@/lib/actions/consultants';\nimport { Card } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\n\nexport default async function EditConsultantPage({ \n  params \n}: { \n  params: Promise<{ id: string }> \n}) {\n  const { id } = await params;\n  const consultant = await getConsultant(id);\n\n  async function handleUpdate(formData: FormData) {\n    'use server';\n    await updateConsultant(id, formData);\n  }\n\n  async function handleDelete() {\n    'use server';\n    await deleteConsultant(id);\n  }\n\n  return (\n    <div className=\"max-w-2xl\">\n      <h1 className=\"text-3xl font-bold mb-8\">Edit Consultant</h1>\n\n      <Card>\n        <form action={handleUpdate}>\n          <Input label=\"Consultant Name *\" name=\"name\" defaultValue={consultant.name} required />\n          <Input \n            label=\"Default Rate *\" \n            name=\"defaultRate\" \n            type=\"number\" \n            step=\"0.01\" \n            defaultValue={consultant.default_rate}\n            required \n          />\n          <Input \n            label=\"Unit Type\" \n            name=\"unitType\" \n            defaultValue={consultant.unit_type}\n          />\n          <Input \n            label=\"Default Description\" \n            name=\"defaultDescription\" \n            defaultValue={consultant.default_description || ''}\n          />\n\n          <div className=\"flex gap-4 mt-6\">\n            <Button type=\"submit\">Update Consultant</Button>\n            <Link href=\"/consultants\">\n              <Button type=\"button\" variant=\"secondary\">\n                Cancel\n              </Button>\n            </Link>\n            <form action={handleDelete} className=\"ml-auto\">\n              <Button type=\"submit\" variant=\"danger\">\n                Delete\n              </Button>\n            </form>\n          </div>\n        </form>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;oMAAA;AACA;AACA;AACA;AACA;;;;;;;;;MAUE,wBAAA,eAAe,qCAAa,QAAkB;;IAE5C,MAAM,IAAA,wJAAgB,kBAAK;AAC7B;+OAHA;MAKA,wBAAA,eAAe;;IAEb,MAAM,IAAA,wJAAgB;AACxB;+OAHA;AAba,eAAe,mBAAmB,EAC/C,MAAM,EAGP;IACC,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,aAAa,MAAM,IAAA,qJAAa,EAAC;QAExB,eAAf;QAKe,eAAf;IAKA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC,wIAAI;0BACH,cAAA,8OAAC;oBAAK,QAAQ;;sCACZ,8OAAC,0IAAK;4BAAC,OAAM;4BAAoB,MAAK;4BAAO,cAAc,WAAW,IAAI;4BAAE,QAAQ;;;;;;sCACpF,8OAAC,0IAAK;4BACJ,OAAM;4BACN,MAAK;4BACL,MAAK;4BACL,MAAK;4BACL,cAAc,WAAW,YAAY;4BACrC,QAAQ;;;;;;sCAEV,8OAAC,0IAAK;4BACJ,OAAM;4BACN,MAAK;4BACL,cAAc,WAAW,SAAS;;;;;;sCAEpC,8OAAC,0IAAK;4BACJ,OAAM;4BACN,MAAK;4BACL,cAAc,WAAW,mBAAmB,IAAI;;;;;;sCAGlD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4IAAM;oCAAC,MAAK;8CAAS;;;;;;8CACtB,8OAAC,0LAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC,4IAAM;wCAAC,MAAK;wCAAS,SAAQ;kDAAY;;;;;;;;;;;8CAI5C,8OAAC;oCAAK,QAAQ;oCAAc,WAAU;8CACpC,cAAA,8OAAC,4IAAM;wCAAC,MAAK;wCAAS,SAAQ;kDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrD"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/.next-internal/server/app/%28dashboard%29/consultants/%5Bid%5D/edit/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logout as '000103f9874b7040b8d4cbbc620486096206d2ac25'} from 'ACTIONS_MODULE0'\nexport {getUser as '0086a0370c203ea1533a70f33d44e12071457751c5'} from 'ACTIONS_MODULE0'\nexport {login as '4074b1ed48e46d3f6aba76d994e833378f65764ade'} from 'ACTIONS_MODULE0'\nexport {signUp as '40b0a4c873012936c9193d892ed73bf486509d8178'} from 'ACTIONS_MODULE0'\nexport {logout as '000103f9874b7040b8d4cbbc620486096206d2ac25'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_1 as '40452dbdb80a959a1e58f837e864b7430395291ff8'} from 'ACTIONS_MODULE1'\nexport {$$RSC_SERVER_ACTION_0 as '600eff36b7f62c9c2ac8da4e29a4dc54d09564a7db'} from 'ACTIONS_MODULE1'\nexport {getConsultants as '00dc10cbc7500983cd6b205f43e4b56c74cc687a5a'} from 'ACTIONS_MODULE2'\nexport {getConsultant as '406d7a044e2b9b99a715d47ef642648d0a7013c3ce'} from 'ACTIONS_MODULE2'\nexport {deleteConsultant as '407400da6eba215d46ce0973051799786f3d9b2416'} from 'ACTIONS_MODULE2'\nexport {createConsultant as '40ad4351cf5b2da69cad21122749bc5f4c539c0c0c'} from 'ACTIONS_MODULE2'\nexport {updateConsultant as '607bb4cdc0facace53b8246bcee24f4e42fc511892'} from 'ACTIONS_MODULE2'\nexport {getUserOrganization as '0075c59babaf1e4bd99e17674d8556a7957a4dad3b'} from 'ACTIONS_MODULE3'\n"],"names":[],"mappings":";AAAA;AAKA;AAEA;AAKA"}}]
}