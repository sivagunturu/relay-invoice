{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/lib/actions/logo.ts"],"sourcesContent":["'use server';\n\nimport { createClient as createSupabaseClient } from '@/lib/supabase/server';\nimport { getUserOrganization } from './organizations';\nimport { revalidatePath } from 'next/cache';\n\nexport async function uploadLogo(formData: FormData) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const file = formData.get('logo') as File;\n  if (!file) throw new Error('No file provided');\n\n  // Validate file type\n  if (!file.type.startsWith('image/')) {\n    throw new Error('File must be an image');\n  }\n\n  // Validate file size (max 2MB)\n  if (file.size > 2 * 1024 * 1024) {\n    throw new Error('File size must be less than 2MB');\n  }\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${org.id}/logo.${fileExt}`;\n\n  // Upload to storage\n  const { data: uploadData, error: uploadError } = await supabase.storage\n    .from('logos')\n    .upload(fileName, file, {\n      upsert: true,\n      contentType: file.type,\n    });\n\n  if (uploadError) throw new Error(uploadError.message);\n\n  // Get public URL\n  const { data: { publicUrl } } = supabase.storage\n    .from('logos')\n    .getPublicUrl(fileName);\n\n  // Update org_settings with logo path\n  const { error: updateError } = await supabase\n    .from('org_settings')\n    .update({ logo_url: publicUrl })\n    .eq('org_id', org.id);\n\n  if (updateError) throw new Error(updateError.message);\n\n  revalidatePath('/settings');\n  return { success: true, logoUrl: publicUrl };\n}\n\nexport async function deleteLogo() {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const fileName = `${org.id}/logo`;\n\n  // Delete from storage (try all common extensions)\n  const extensions = ['png', 'jpg', 'jpeg', 'gif', 'webp'];\n  for (const ext of extensions) {\n    await supabase.storage.from('logos').remove([`${fileName}.${ext}`]);\n  }\n\n  // Update org_settings\n  const { error } = await supabase\n    .from('org_settings')\n    .update({ logo_url: null })\n    .eq('org_id', org.id);\n\n  if (error) throw new Error(error.message);\n\n  revalidatePath('/settings');\n  return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;MAMsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,8CAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/lib/actions/logo.ts"],"sourcesContent":["'use server';\n\nimport { createClient as createSupabaseClient } from '@/lib/supabase/server';\nimport { getUserOrganization } from './organizations';\nimport { revalidatePath } from 'next/cache';\n\nexport async function uploadLogo(formData: FormData) {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const file = formData.get('logo') as File;\n  if (!file) throw new Error('No file provided');\n\n  // Validate file type\n  if (!file.type.startsWith('image/')) {\n    throw new Error('File must be an image');\n  }\n\n  // Validate file size (max 2MB)\n  if (file.size > 2 * 1024 * 1024) {\n    throw new Error('File size must be less than 2MB');\n  }\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${org.id}/logo.${fileExt}`;\n\n  // Upload to storage\n  const { data: uploadData, error: uploadError } = await supabase.storage\n    .from('logos')\n    .upload(fileName, file, {\n      upsert: true,\n      contentType: file.type,\n    });\n\n  if (uploadError) throw new Error(uploadError.message);\n\n  // Get public URL\n  const { data: { publicUrl } } = supabase.storage\n    .from('logos')\n    .getPublicUrl(fileName);\n\n  // Update org_settings with logo path\n  const { error: updateError } = await supabase\n    .from('org_settings')\n    .update({ logo_url: publicUrl })\n    .eq('org_id', org.id);\n\n  if (updateError) throw new Error(updateError.message);\n\n  revalidatePath('/settings');\n  return { success: true, logoUrl: publicUrl };\n}\n\nexport async function deleteLogo() {\n  const supabase = await createSupabaseClient();\n  const org = await getUserOrganization();\n\n  if (!org) throw new Error('No organization found');\n\n  const fileName = `${org.id}/logo`;\n\n  // Delete from storage (try all common extensions)\n  const extensions = ['png', 'jpg', 'jpeg', 'gif', 'webp'];\n  for (const ext of extensions) {\n    await supabase.storage.from('logos').remove([`${fileName}.${ext}`]);\n  }\n\n  // Update org_settings\n  const { error } = await supabase\n    .from('org_settings')\n    .update({ logo_url: null })\n    .eq('org_id', org.id);\n\n  if (error) throw new Error(error.message);\n\n  revalidatePath('/settings');\n  return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;MAuDsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,8CAAA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/ui/button.tsx"],"sourcesContent":["import { ButtonHTMLAttributes } from 'react';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger';\n}\n\nexport function Button({ variant = 'primary', className = '', ...props }: ButtonProps) {\n  const baseStyles = 'px-4 py-2 rounded-md font-medium transition-colors';\n  const variants = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700',\n    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300',\n    danger: 'bg-red-600 text-white hover:bg-red-700',\n  };\n\n  return (\n    <button\n      className={`${baseStyles} ${variants[variant]} ${className}`}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,OAAO,EAAE,UAAU,SAAS,EAAE,YAAY,EAAE,EAAE,GAAG,OAAoB;IACnF,MAAM,aAAa;IACnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,QAAQ;IACV;IAEA,qBACE,6LAAC;QACC,WAAW,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW;QAC3D,GAAG,KAAK;;;;;;AAGf;KAdgB"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/sivagunturu/Documents/relay-invoice/src/components/settings/logo-upload.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { uploadLogo, deleteLogo } from '@/lib/actions/logo';\nimport { Button } from '@/components/ui/button';\nimport Image from 'next/image';\n\nexport function LogoUpload({ currentLogoUrl }: { currentLogoUrl?: string | null }) {\n  const [uploading, setUploading] = useState(false);\n  const [preview, setPreview] = useState<string | null>(currentLogoUrl || null);\n\n  async function handleUpload(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    setUploading(true);\n\n    try {\n      const formData = new FormData(e.currentTarget);\n      const result = await uploadLogo(formData);\n      setPreview(result.logoUrl);\n      alert('Logo uploaded successfully!');\n    } catch (error: any) {\n      alert(`Error: ${error.message}`);\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  async function handleDelete() {\n    if (!confirm('Are you sure you want to delete the logo?')) return;\n\n    setUploading(true);\n    try {\n      await deleteLogo();\n      setPreview(null);\n      alert('Logo deleted successfully!');\n    } catch (error: any) {\n      alert(`Error: ${error.message}`);\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {preview && (\n        <div className=\"border rounded-lg p-4 bg-gray-50\">\n          <p className=\"text-sm font-medium text-gray-700 mb-2\">Current Logo:</p>\n          <div className=\"relative w-48 h-48 bg-white border rounded-lg overflow-hidden\">\n            <Image\n              src={preview}\n              alt=\"Company Logo\"\n              fill\n              className=\"object-contain p-4\"\n            />\n          </div>\n          <Button\n            type=\"button\"\n            variant=\"danger\"\n            onClick={handleDelete}\n            disabled={uploading}\n            className=\"mt-4\"\n          >\n            Delete Logo\n          </Button>\n        </div>\n      )}\n\n      <form onSubmit={handleUpload} className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            {preview ? 'Upload New Logo' : 'Upload Logo'}\n          </label>\n          <input\n            type=\"file\"\n            name=\"logo\"\n            accept=\"image/*\"\n            required\n            className=\"block w-full text-sm text-gray-500\n              file:mr-4 file:py-2 file:px-4\n              file:rounded-md file:border-0\n              file:text-sm file:font-semibold\n              file:bg-blue-50 file:text-blue-700\n              hover:file:bg-blue-100\"\n          />\n          <p className=\"mt-1 text-sm text-gray-500\">\n            PNG, JPG, GIF up to 2MB. Recommended: 500x200px\n          </p>\n        </div>\n\n        <Button type=\"submit\" disabled={uploading}>\n          {uploading ? 'Uploading...' : 'Upload Logo'}\n        </Button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAOO,SAAS,WAAW,EAAE,cAAc,EAAsC;;IAC/E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB,kBAAkB;IAExE,eAAe,aAAa,CAAmC;QAC7D,EAAE,cAAc;QAChB,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,IAAI,SAAS,EAAE,aAAa;YAC7C,MAAM,SAAS,MAAM,IAAA,8KAAU,EAAC;YAChC,WAAW,OAAO,OAAO;YACzB,MAAM;QACR,EAAE,OAAO,OAAY;YACnB,MAAM,CAAC,OAAO,EAAE,MAAM,OAAO,EAAE;QACjC,SAAU;YACR,aAAa;QACf;IACF;IAEA,eAAe;QACb,IAAI,CAAC,QAAQ,8CAA8C;QAE3D,aAAa;QACb,IAAI;YACF,MAAM,IAAA,8KAAU;YAChB,WAAW;YACX,MAAM;QACR,EAAE,OAAO,OAAY;YACnB,MAAM,CAAC,OAAO,EAAE,MAAM,OAAO,EAAE;QACjC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,yBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAyC;;;;;;kCACtD,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,2IAAK;4BACJ,KAAK;4BACL,KAAI;4BACJ,IAAI;4BACJ,WAAU;;;;;;;;;;;kCAGd,6LAAC,+IAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS;wBACT,UAAU;wBACV,WAAU;kCACX;;;;;;;;;;;;0BAML,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CACd,UAAU,oBAAoB;;;;;;0CAEjC,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,QAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAOZ,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAK5C,6LAAC,+IAAM;wBAAC,MAAK;wBAAS,UAAU;kCAC7B,YAAY,iBAAiB;;;;;;;;;;;;;;;;;;AAKxC;GAxFgB;KAAA"}}]
}