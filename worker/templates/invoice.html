<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: 9pt;
      line-height: 1.5;
      color: #0f172a;
      background: white;
      padding: 0;
    }

    .invoice-container {
      max-width: 100%;
      margin: 0;
      background: white;
    }

    .header {
      background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0ea5e9 100%);
      padding: 30px 40px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -10%;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(14, 165, 233, 0.3) 0%, transparent 70%);
      border-radius: 50%;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: -30%;
      left: 20%;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(56, 189, 248, 0.2) 0%, transparent 70%);
      border-radius: 50%;
    }

    .header-left {
      position: relative;
      z-index: 1;
    }

    .logo-container {
      background: white;
      padding: 12px 16px;
      border-radius: 12px;
      display: inline-block;
      margin-bottom: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .logo {
      max-width: 180px;
      max-height: 50px;
      display: block;
    }

    .company-name {
      font-size: 18pt;
      font-weight: 700;
      color: white;
      margin-bottom: 6px;
      letter-spacing: -0.5px;
    }

    .company-details {
      font-size: 8.5pt;
      color: rgba(255,255,255,0.85);
      line-height: 1.6;
    }

    .header-right {
      text-align: right;
      position: relative;
      z-index: 1;
    }

    .invoice-title {
      font-size: 42pt;
      font-weight: 800;
      color: white;
      letter-spacing: -2px;
      text-transform: uppercase;
      margin-bottom: 8px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .invoice-type-badge {
      display: inline-block;
      padding: 6px 14px;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      color: white;
      border-radius: 20px;
      font-size: 8pt;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .content {
      padding: 30px 40px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .bill-to-section {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      padding: 20px 24px;
      border-radius: 12px;
      border-left: 4px solid #0ea5e9;
    }

    .invoice-meta-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      padding: 20px 24px;
      border-radius: 12px;
      border-left: 4px solid #0284c7;
    }

    .section-label {
      font-size: 7pt;
      font-weight: 700;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 12px;
    }

    .client-name {
      font-size: 14pt;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 6px;
    }

    .client-details {
      font-size: 9pt;
      color: #475569;
      line-height: 1.7;
    }

    .meta-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .meta-item {
      padding: 8px 0;
    }

    .meta-label {
      font-size: 7pt;
      font-weight: 600;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 3px;
    }

    .meta-value {
      font-size: 11pt;
      font-weight: 600;
      color: #0f172a;
    }

    .meta-value.highlight {
      color: #0284c7;
      font-weight: 700;
    }

    .items-section {
      margin-bottom: 25px;
    }

    .items-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .items-title {
      font-size: 10pt;
      font-weight: 700;
      color: #0f172a;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .items-line {
      flex: 1;
      height: 2px;
      background: linear-gradient(90deg, #0ea5e9 0%, transparent 100%);
      margin-left: 15px;
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }

    thead {
      background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 100%);
    }

    th {
      color: white;
      padding: 14px 18px;
      text-align: left;
      font-weight: 600;
      font-size: 8pt;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    th:last-child {
      text-align: right;
    }

    th:nth-child(2), th:nth-child(3) {
      text-align: center;
    }

    tbody tr {
      background: white;
      transition: background 0.2s;
    }

    tbody tr:nth-child(even) {
      background: #f8fafc;
    }

    td {
      padding: 16px 18px;
      border-bottom: 1px solid #e2e8f0;
      font-size: 9.5pt;
      color: #334155;
    }

    td:first-child {
      font-weight: 500;
      color: #0f172a;
    }

    td:last-child {
      text-align: right;
      font-weight: 600;
      color: #0f172a;
    }

    td:nth-child(2), td:nth-child(3) {
      text-align: center;
      color: #64748b;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    .totals-section {
      display: flex;
      justify-content: flex-end;
      margin-top: 25px;
    }

    .totals-box {
      width: 320px;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border-radius: 12px;
      padding: 20px 24px;
      border: 1px solid #e2e8f0;
    }

    .totals-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      font-size: 10pt;
    }

    .totals-row .label {
      color: #64748b;
      font-weight: 500;
    }

    .totals-row .value {
      font-weight: 600;
      color: #0f172a;
    }

    .totals-row.tax .label {
      font-size: 9pt;
    }

    .totals-divider {
      height: 2px;
      background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%);
      margin: 12px 0;
      border-radius: 2px;
    }

    .totals-row.total {
      padding: 12px 0 0 0;
    }

    .totals-row.total .label {
      font-size: 12pt;
      font-weight: 700;
      color: #0f172a;
    }

    .totals-row.total .value {
      font-size: 18pt;
      font-weight: 800;
      color: #0284c7;
      letter-spacing: -0.5px;
    }

    .payment-section {
      margin-top: 30px;
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid #86efac;
    }

    .payment-header {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }

    .payment-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      color: white;
      font-size: 16pt;
    }

    .payment-title {
      font-size: 11pt;
      font-weight: 700;
      color: #166534;
    }

    .payment-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px 24px;
    }

    .payment-item {
      display: flex;
      flex-direction: column;
    }

    .payment-label {
      font-size: 7pt;
      font-weight: 600;
      color: #4ade80;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 3px;
    }

    .payment-value {
      font-size: 10pt;
      font-weight: 600;
      color: #166534;
    }

    .compliance-section {
      margin-top: 25px;
      background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%);
      border-radius: 12px;
      padding: 20px 24px;
      border: 1px solid #fde047;
    }

    .compliance-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .compliance-icon {
      width: 24px;
      height: 24px;
      background: #facc15;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
      font-size: 12pt;
    }

    .compliance-title {
      font-size: 9pt;
      font-weight: 700;
      color: #854d0e;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .compliance-text {
      font-size: 8.5pt;
      color: #713f12;
      line-height: 1.6;
    }

    .footer {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid #e2e8f0;
      text-align: center;
    }

    .footer-note {
      font-size: 9pt;
      color: #64748b;
      margin-bottom: 8px;
    }

    .footer-legal {
      font-size: 7pt;
      color: #94a3b8;
      line-height: 1.5;
    }

    .watermark {
      position: fixed;
      bottom: 20px;
      right: 40px;
      font-size: 7pt;
      color: #cbd5e1;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="invoice-container">
    <div class="header">
      <div class="header-left">
        {{#if logo_url}}
        <div class="logo-container">
          <img src="{{logo_url}}" class="logo" alt="Logo">
        </div>
        {{/if}}
        <div class="company-name">{{company_name}}</div>
        <div class="company-details">
          {{#if address_line1}}<div>{{address_line1}}</div>{{/if}}
          {{#if address_line2}}<div>{{address_line2}}</div>{{/if}}
          {{#if email}}<div>{{email}}</div>{{/if}}
          {{#if phone}}<div>{{phone}}</div>{{/if}}
        </div>
      </div>
      <div class="header-right">
        <div class="invoice-title">Invoice</div>
        {{#if invoice_type}}
        <span class="invoice-type-badge">{{invoice_type}}</span>
        {{/if}}
      </div>
    </div>

    <div class="content">
      <div class="info-grid">
        <div class="bill-to-section">
          <div class="section-label">Bill To</div>
          <div class="client-name">{{client_name}}</div>
          <div class="client-details">
            {{#if client_address_line1}}<div>{{client_address_line1}}</div>{{/if}}
            {{#if client_address_line2}}<div>{{client_address_line2}}</div>{{/if}}
            {{#if client_city_state_zip}}<div>{{client_city_state_zip}}</div>{{/if}}
          </div>
        </div>

        <div class="invoice-meta-section">
          <div class="section-label">Invoice Details</div>
          <div class="meta-grid">
            <div class="meta-item">
              <div class="meta-label">Invoice No.</div>
              <div class="meta-value highlight">{{invoice_number}}</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Issue Date</div>
              <div class="meta-value">{{issue_date}}</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Due Date</div>
              <div class="meta-value">{{due_date}}</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Terms</div>
              <div class="meta-value">{{terms}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="items-section">
        <div class="items-header">
          <span class="items-title">Services & Items</span>
          <span class="items-line"></span>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 50%;">Description</th>
              <th style="width: 15%;">Qty</th>
              <th style="width: 15%;">Rate</th>
              <th style="width: 20%;">Amount</th>
            </tr>
          </thead>
          <tbody>
            {{#each items}}
            <tr>
              <td>{{description}}</td>
              <td>{{qty}}</td>
              <td>{{rate}}</td>
              <td>{{amount}}</td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>

      <div class="totals-section">
        <div class="totals-box">
          <div class="totals-row">
            <span class="label">Subtotal</span>
            <span class="value">{{subtotal}}</span>
          </div>
          <div class="totals-row tax">
            <span class="label">Tax{{#if tax_rate}} ({{tax_rate}}%){{/if}}</span>
            <span class="value">{{tax}}</span>
          </div>
          <div class="totals-divider"></div>
          <div class="totals-row total">
            <span class="label">Total Due</span>
            <span class="value">{{total}}</span>
          </div>
        </div>
      </div>

      {{#if payment_instructions}}
      <div class="payment-section">
        <div class="payment-header">
          <div class="payment-icon">$</div>
          <div class="payment-title">Payment Instructions</div>
        </div>
        <div class="payment-grid">
          {{#if payment_instructions.payable_to}}
          <div class="payment-item">
            <span class="payment-label">Payable To</span>
            <span class="payment-value">{{payment_instructions.payable_to}}</span>
          </div>
          {{/if}}
          {{#if payment_instructions.bank_name}}
          <div class="payment-item">
            <span class="payment-label">Bank Name</span>
            <span class="payment-value">{{payment_instructions.bank_name}}</span>
          </div>
          {{/if}}
          {{#if payment_instructions.routing_number}}
          <div class="payment-item">
            <span class="payment-label">Routing Number</span>
            <span class="payment-value">{{payment_instructions.routing_number}}</span>
          </div>
          {{/if}}
          {{#if payment_instructions.account_number}}
          <div class="payment-item">
            <span class="payment-label">Account Number</span>
            <span class="payment-value">{{payment_instructions.account_number}}</span>
          </div>
          {{/if}}
        </div>
      </div>
      {{/if}}

      {{#if compliance_text}}
      <div class="compliance-section">
        <div class="compliance-header">
          <div class="compliance-icon">!</div>
          <div class="compliance-title">Legal & Compliance Notice</div>
        </div>
        <div class="compliance-text">{{compliance_text}}</div>
      </div>
      {{/if}}

      <div class="footer">
        {{#if footer_note}}
        <div class="footer-note">{{footer_note}}</div>
        {{/if}}
        <div class="footer-legal">
          This invoice is computer-generated and is valid without signature. Payment is due by the date specified above.
          Please include the invoice number with your payment for proper credit. Late payments may be subject to interest charges.
        </div>
      </div>
    </div>

    <div class="watermark">Generated by RelayInvoice</div>
  </div>
</body>
</html>
